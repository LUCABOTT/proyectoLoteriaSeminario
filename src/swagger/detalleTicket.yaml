paths:
  /api/detalle-tickets/listar:
    get:
      tags:
        - Detalle Tickets
      summary: Obtener detalles de tickets
      description: |
        Retorna los detalles de tickets (números comprados).
        Opcionalmente se puede filtrar por ID de ticket específico.
        Parámetro de consulta opcional: ticket.
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: ticket
          description: ID del ticket para filtrar detalles específicos
      responses:
        "200":
          description: Lista de detalles de tickets
        "401":
          description: No autorizado
        "500":
          description: Error interno del servidor

  /api/detalle-tickets/guardar:
    post:
      tags:
        - Detalle Tickets
      summary: Crear detalle de ticket
      description: |
        Agrega un nuevo número comprado a un ticket existente.
        El ticket debe pertenecer a un sorteo que esté en estado 'abierto'.
        Requiere: IdTicket, NumeroComprado (0-99), Subtotal.
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            example:
              IdTicket: 1
              NumeroComprado: 45
              Subtotal: 25.00
      responses:
        "201":
          description: Detalle de ticket creado exitosamente
        "400":
          description: Error de validación o datos inválidos
        "401":
          description: No autorizado
        "500":
          description: Error interno del servidor

  /api/detalle-tickets/editar:
    put:
      tags:
        - Detalle Tickets
      summary: Editar detalle de ticket
      description: |
        Modifica un detalle de ticket existente. Solo se puede editar si:
        - El sorteo asociado al ticket está en estado 'abierto'
        - El nuevo número no está duplicado en el mismo ticket
        - Se mantienen las validaciones de rango (0-99)
        Parámetro de consulta: id (requerido).
        Campos opcionales: IdTicket, NumeroComprado, Subtotal.
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: id
          required: true
          description: ID del detalle de ticket a editar
      requestBody:
        required: true
        content:
          application/json:
            example:
              NumeroComprado: 67
              Subtotal: 30.00
      responses:
        "200":
          description: Detalle de ticket editado exitosamente
        "400":
          description: Error de validación o reglas de negocio
        "401":
          description: No autorizado
        "404":
          description: Detalle de ticket no encontrado
        "500":
          description: Error interno del servidor

  /api/detalle-tickets/eliminar:
    delete:
      tags:
        - Detalle Tickets
      summary: Eliminar detalle de ticket
      description: |
        Elimina un detalle de ticket específico del sistema.
        Solo se puede eliminar si el sorteo asociado permite modificaciones.
        Parámetro de consulta: id (requerido).
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: id
          required: true
          description: ID del detalle de ticket a eliminar
      responses:
        "200":
          description: Detalle de ticket eliminado exitosamente
        "400":
          description: Error de validación
        "401":
          description: No autorizado
        "404":
          description: Detalle de ticket no encontrado
        "500":
          description: Error interno del servidor
