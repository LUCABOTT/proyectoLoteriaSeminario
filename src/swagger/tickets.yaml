paths:
  /api/tickets/listar:
    get:
      tags:
        - Tickets
      summary: Obtener tickets
      description: |
        Retorna los tickets del usuario autenticado o todos los tickets (administradores).
        Parámetros de consulta opcionales: usuario_id (solo admin), sorteo_id, estado, page, limit.
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: usuario_id
          description: ID del usuario (solo administradores)
        - in: query
          name: sorteo_id
          description: Filtrar por ID de sorteo
        - in: query
          name: estado
          description: Filtrar por estado del ticket (pendiente, pagado, cancelado, reembolsado, anulado)
        - in: query
          name: page
          description: Número de página (default 1)
        - in: query
          name: limit
          description: Cantidad de resultados por página (1-50, default 10)
      responses:
        "200":
          description: Lista de tickets
        "401":
          description: No autorizado
        "500":
          description: Error interno del servidor

  /api/tickets/mis-tickets:
    get:
      tags:
        - Tickets
      summary: Obtener mis tickets comprados
      description: |
        Retorna todos los tickets comprados por el usuario autenticado.
        Los tickets se ordenan por fecha de compra descendente (más recientes primero).
      security:
        - BearerAuth: []
      responses:
        "200":
          description: Lista de tickets del usuario
        "401":
          description: Usuario no autenticado
        "500":
          description: Error interno del servidor

  /api/tickets/guardar:
    post:
      tags:
        - Tickets
      summary: Guardar ticket (Administrativo)
      description: |
        Crea un nuevo ticket especificando el usuario manualmente (uso administrativo).
        Requiere: IdUsuario, IdSorteo, Total.
        Opcional: FechaCompra, Estado.
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            example:
              IdUsuario: 1
              IdSorteo: 1
              Total: 50.00
              Estado: "pendiente"
      responses:
        "201":
          description: Ticket creado exitosamente
        "400":
          description: Error en la validación
        "401":
          description: No autorizado
        "402":
          description: Saldo insuficiente
        "404":
          description: Sorteo o usuario no encontrado
        "500":
          description: Error interno del servidor

  /api/tickets/comprar:
    post:
      tags:
        - Tickets
      summary: Comprar ticket como usuario autenticado
      description: |
        Compra un ticket para el usuario actualmente autenticado.
        El saldo se debita automáticamente de la billetera del usuario.
        Requiere: IdSorteo, Total, Numeros (array de números entre 0-99).
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            example:
              IdSorteo: 1
              Total: 50.00
              Numeros: [5, 10, 15, 20, 25]
      responses:
        "201":
          description: Ticket comprado exitosamente
        "400":
          description: Error en la validación
        "401":
          description: No autorizado
        "402":
          description: Saldo insuficiente
        "404":
          description: Sorteo no encontrado
        "500":
          description: Error interno del servidor

  /api/tickets/editar:
    put:
      tags:
        - Tickets
      summary: Editar un ticket existente
      description: |
        Actualiza información de un ticket.
        Parámetro de consulta: id (requerido).
        Campos opcionales: IdSorteo, Estado, Total.
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: id
          required: true
          description: ID del ticket a editar
      requestBody:
        required: true
        content:
          application/json:
            example:
              Estado: "pagado"
      responses:
        "200":
          description: Ticket editado exitosamente
        "400":
          description: Error de validación
        "401":
          description: No autorizado
        "404":
          description: Ticket no encontrado
        "500":
          description: Error interno del servidor

  /api/tickets/eliminar:
    delete:
      tags:
        - Tickets
      summary: Eliminar un ticket
      description: |
        Elimina un ticket del sistema.
        Parámetro de consulta: id (requerido).
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: id
          required: true
          description: ID del ticket a eliminar
      responses:
        "200":
          description: Ticket eliminado exitosamente
        "400":
          description: Error de validación
        "401":
          description: No autorizado
        "404":
          description: Ticket no encontrado
        "500":
          description: Error interno del servidor
