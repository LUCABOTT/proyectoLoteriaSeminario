paths:
  /api/apiRoles:
    get:
      tags:
        - Roles y Permisos
      summary: Obtener todos los roles
      description: Retorna la lista de roles disponibles en el sistema
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Lista de roles
        '401':
          description: No autorizado
        '500':
          description: Error interno del servidor

    post:
      tags:
        - Roles y Permisos
      summary: Crear un nuevo rol
      description: |
        Crea un nuevo rol en el sistema (solo administradores).
        Requiere: nombre, descripcion.
        Opcional: activo (default true).
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            example:
              nombre: "moderador"
              descripcion: "Gestión de contenido y usuarios"
              activo: true
      responses:
        '201':
          description: Rol creado exitosamente
        '400':
          description: Solicitud incorrecta
        '401':
          description: No autorizado
        '409':
          description: El rol ya existe
        '500':
          description: Error interno del servidor

  /api/apiFunciones:
    get:
      tags:
        - Roles y Permisos
      summary: Obtener todas las funciones
      description: Retorna la lista de funciones/permisos disponibles en el sistema
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Lista de funciones
        '401':
          description: No autorizado
        '500':
          description: Error interno del servidor

    post:
      tags:
        - Roles y Permisos
      summary: Crear nueva función
      description: |
        Crea una nueva función/permiso en el sistema (solo administradores).
        Requiere: nombre, descripcion, modulo.
        Opcional: activo (default true).
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            example:
              nombre: "gestionar_sorteos"
              descripcion: "Crear y administrar sorteos"
              modulo: "sorteos"
              activo: true
      responses:
        '201':
          description: Función creada exitosamente
        '400':
          description: Solicitud incorrecta
        '401':
          description: No autorizado
        '500':
          description: Error interno del servidor

  /api/apiRolesUsuarios:
    get:
      tags:
        - Roles y Permisos
      summary: Obtener roles de usuarios
      description: |
        Retorna las asignaciones de roles a usuarios.
        Parámetros de consulta opcionales: usuario_id, rol_id.
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: usuario_id
          description: Filtrar por ID de usuario
        - in: query
          name: rol_id
          description: Filtrar por ID de rol
      responses:
        '200':
          description: Lista de asignaciones rol-usuario
        '401':
          description: No autorizado
        '500':
          description: Error interno del servidor

    post:
      tags:
        - Roles y Permisos
      summary: Asignar rol a usuario
      description: |
        Asigna un rol específico a un usuario (solo administradores).
        Requiere: usuario_id, rol_id.
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            example:
              usuario_id: 5
              rol_id: 2
      responses:
        '201':
          description: Rol asignado exitosamente
        '400':
          description: Solicitud incorrecta
        '401':
          description: No autorizado
        '404':
          description: Usuario o rol no encontrado
        '409':
          description: La asignación ya existe
        '500':
          description: Error interno del servidor

  /api/apiFuncionesRoles:
    get:
      tags:
        - Roles y Permisos
      summary: Obtener funciones asignadas a roles
      description: |
        Retorna las funciones asignadas a cada rol.
        Parámetros de consulta opcionales: rol_id, funcion_id.
      security:
        - BearerAuth: []
      parameters:
        - in: query
          name: rol_id
          description: Filtrar por ID de rol
        - in: query
          name: funcion_id
          description: Filtrar por ID de función
      responses:
        '200':
          description: Lista de asignaciones función-rol
        '401':
          description: No autorizado
        '500':
          description: Error interno del servidor

    post:
      tags:
        - Roles y Permisos
      summary: Asignar función a rol
      description: |
        Asigna una función/permiso a un rol (solo administradores).
        Requiere: rol_id, funcion_id.
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            example:
              rol_id: 2
              funcion_id: 3
      responses:
        '201':
          description: Función asignada al rol exitosamente
        '400':
          description: Solicitud incorrecta
        '401':
          description: No autorizado
        '404':
          description: Rol o función no encontrada
        '409':
          description: La asignación ya existe
        '500':
          description: Error interno del servidor
